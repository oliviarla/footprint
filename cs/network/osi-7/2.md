# 2계층: 데이터 링크 계층

## 특징

* 전기 신호를 모아 알아볼 수 있는 데이터 형태로 처리하는 계층
* **주소 정보를 정의하고 정확한 주소로 통신**이 되도록 직접 연결된 네트워크 장치 간의 데이터 전송을 담당한다.
* 과거에는 2계층 장비에서 에러를 탐지하고 고치거나 재전송했지만, 최근에는 에러를 탐지하기만 한다.
* 출발지와 도착지 주소를 확인하여, 데이터를 받았을 때 도착지가 내 자신인지 확인한 후 데이터를 처리한다.

### 프레임

* 2계층에서 전송되는 데이터
* 프레임의 헤더에는 송신 및 수신 장치의 주소가 포함
  * 트레일러에는 오류 검출을 위한 오류 검출 코드 포함

### MAC 주소

* Media Access Control
* 스위치가 프레임을 주고받을 때 사용하는 주소
* 48bit 의 16 진수로 표현됨
* 소프트웨어적으로만 주소 변경 가능

## 기능

### flow control

* 서버는 데이터를 보낼 때 받는 사람이 현재 데이터를 받을 수 있는지 확인한다.
* 만약 스위치가 데이터를 받지 못하는 상황이라면 통신 중지를 요청한다.

<figure><img src="../../../.gitbook/assets/image (5) (1) (1).png" alt=""><figcaption></figcaption></figure>



* ARP 프로토콜로 IP 주소를 MAC주소로 변환해, MAC 주소 기반으로 통신한다.
* 프레이밍(Framing), 흐름 제어, 오류 제어, 접근 제어, 동기화 기능을 제공한다.

## 장비

* NIC (Network Interface Card)
  * PC나 서버를 네트워크에 연결해주는 카드나 인터페이스를 지칭한다.
  * 여러 네트워크에 동시에 연결되어야 하거나 높은 대역폭이 필요한 경우 여러 NIC을 장착한다.
  * 고유 MAC 주소를 가지며 목적지 MAC 주소가 NIC의 MAC 주소와 동일하면 올바르게 도착한 데이터이므로 상위 계층에서 처리할 수 있도록 메모리에 적재한다.
  * 동작 방식
    * 전기 신호와 데이터 형태를 변환한다.
    * 목적지 MAC 주소와 출발지 MAC 주소, 네트워크 인터페이스 카드의 MAC 주소를 확인한다.
    * **목적지 MAC 주소와 네트워크 인터페이스가 가진 MAC 주소가 맞으면 데이터를 처리**하고, 아니면 데이터를 폐기한다.
  * 고성능 NIC
    * 보통 PC나 노트북에서는 1GbE NIC을 사용하지만, 서버나 네트워크 장치에는 고성능을 가진 10G 이상의 NIC을 사용한다.
    * 패킷 생성과 전송을 CPU 도움 없이 독자적으로 처리한다.
    * L3 스위치 기능이 내장되어 있어 가상화 서버들끼리 연결하는 vSwitch를 가속하는 기능을 제공하는 NIC도 존재한다.
*   스위치

    * 단말이 어떤 주소를 갖고 있는지 Address Learning 과정을 통해 확인하여, 단말의 MAC 주소와 연결된 포트를 기반으로 통신 시 포트를 적절히 필터링하고 포워딩해준다.
    *   허브와 달리 목적지 주소에만 신호를 전달한다.

        <figure><img src="../../../.gitbook/assets/image (2) (1) (1).png" alt=""><figcaption></figcaption></figure>
    * 스위치의 적절한 필터링과 포워딩 덕분에 통신이 필요한  포트만 사용하고 네트워크 전체에 불필요한 처리가 감소하여 이더넷 기반 네트워크가 급증하는 계기가 되었다.

    <figure><img src="../../../.gitbook/assets/image (62).png" alt="" width="563"><figcaption></figcaption></figure>
